#!/bin/bash

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(awk '!/^\s*#/' "$COMMIT_MSG_FILE")
SECOND_LINE=$(echo "$COMMIT_MSG" | sed -n '2p')

IS_HEADER_FORMAT_VALID='^(:[a-zA-Z_]+: )?(feat|fix|docs|refactor|test|style|chore): .+'

# --- header ---
if ! echo "$COMMIT_MSG" | grep -E "$IS_HEADER_FORMAT_VALID" > /dev/null; then
    echo "ğŸš¨ ì»¤ë°‹ ë©”ì‹œì§€ëŠ” 'feat: ', 'fix: ', 'docs: ', 'refactor: ', 'test: ', 'style: ', 'chore: ' ì¤‘ í•˜ë‚˜ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤. (ë„ì›Œì“°ê¸° í¬í•¨)" 
    exit 1
fi